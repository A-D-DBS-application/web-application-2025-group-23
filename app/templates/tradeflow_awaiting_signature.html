{% extends "base.html" %}
{% block title %}Waiting for Your Signature ‚Äì Barter.com{% endblock %}
{% block nav_tradeflow_active %}class="active"{% endblock %}
{% set active_page = 'awaiting_signature' %}

{% block content %}
<div class="tradeflow-container">
    {% include '_tradeflow_sidebar.html' %}

    <main class="main">
      <div class="page-header">
        <h1 class="page-title">Waiting for Your Signature</h1>
        <p class="page-desc">Offers awaiting your approval to become active deals</p>
      </div>
      {% if awaiting_signature %}
      <div class="cards-grid">
        {% for offer in awaiting_signature %}
        <a class="card" href="{{ url_for('main.tradeflow_awaiting_signature_detail', company_id=company.company_id, proposal_id=offer.proposal_id) }}">
          <div class="card-header">
            <div class="card-header-label">‚è≥ Awaiting your action</div>
          </div>
          <div class="card-pair">
            <div class="card-side">
              <div class="card-side-label">{{ offer.from_company.name }}</div>
              <div class="card-side-title">{{ offer.from_service.title }}</div>
            </div>
            <div class="arrows">‚Üí</div>
            <div class="card-side">
              <div class="card-side-label">{{ offer.to_company.name }}</div>
              <div class="card-side-title">{{ offer.to_service.title }}</div>
            </div>
          </div>
          <div class="card-meta">Created {{ offer.created_at.strftime('%d-%m-%Y') }}</div>
          {% if offer.money_amount and offer.money_amount|int > 0 and offer.money_type %}
          {% if offer.money_type == 'receive' %}
            <div class="money-pill">üí∏ They ask: ‚Ç¨{{ offer.money_amount }}</div>
          {% else %}
            <div class="money-pill">üí∞ They offer: ‚Ç¨{{ offer.money_amount }}</div>
          {% endif %}
          {% endif %}
        </a>
        {% endfor %}
      </div>
      {% else %}
      <div class="empty">
        <div class="empty-icon">‚úÖ</div>
        <div class="empty-text">All caught up! No pending signatures</div>
      </div>
      {% endif %}
    </main>
  </div>
{% endblock %}
