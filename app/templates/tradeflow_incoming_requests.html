{% extends "base.html" %}
{% block title %}Incoming Requests ‚Äì Barter.com{% endblock %}
{% block nav_tradeflow_active %}class="active"{% endblock %}

{% set active_page = 'incoming' %}

{% block content %}
<div class="tradeflow-container">
  {% include '_tradeflow_sidebar.html' %}

  <main class="main">
    <div class="page-header">
      <h1 class="page-title">Incoming Requests</h1>
      <p class="page-desc">Companies interested in trading for one of your services</p>
    </div>
    {% if incoming_requests %}
    <div class="cards-grid">
      {% for req in incoming_requests %}
      <div class="card" data-href="{{ url_for('main.tradeflow_select_return', company_id=company.company_id, request_id=req.request_id) }}">
        <div class="card-company">{{ req.requesting_company.name }}</div>
        <div class="card-title">{{ req.requested_service.title }}</div>
        <div class="card-desc">{{ req.requested_service.description[:70] }}{% if req.requested_service.description|length > 70 %}...{% endif %}</div>
        <div class="card-meta">
          <span>‚è± {{ req.requested_service.duration_hours }} hrs</span>
          <span class="card-badge">{{ req.validity_days }}d</span>
        </div>
        <button class="card-button">Select Return Service</button>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <div class="empty">
      <div class="empty-icon">üì≠</div>
      <div class="empty-text">No incoming requests yet</div>
    </div>
    {% endif %}
  </main>
</div>
{% endblock %}
