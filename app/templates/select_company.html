{% extends "base.html" %}
{% block title %}Select company | Barter.com{% endblock %}

{% block nav_marketplace_active %}{% if destination == 'marketplace' %}class="active"{% endif %}{% endblock %}
{% block nav_tradeflow_active %}{% if destination == 'tradeflow' %}class="active"{% endif %}{% endblock %}

{% block content %}
<main class="my-companies-main-content" style="max-width: 1100px; margin: 0 auto; padding: 32px 24px 48px;">
        <h1 class="page-heading" style="margin: 0 0 8px 0; font-size: 24px; font-weight: 700; color: #111827;">Select a company</h1>
        <p style="margin: 0 0 24px 0; color: #6b7280; font-size: 15px;">
            {% if destination == 'marketplace' %}
            Choose which company you want to browse the marketplace as
            {% elif destination == 'tradeflow' %}
            Choose which company's tradeflow you want to view
            {% else %}
            Select a company to continue
            {% endif %}
        </p>

        {% if companies %}
        <div class="companies-list">
            {% for company in companies %}
            {% if destination == 'marketplace' %}
            <a href="{{ url_for('main.marketplace', company_id=company.company_id) }}" class="company-item" style="display: flex; justify-content: space-between; align-items: center; text-decoration: none; color: inherit;">
            {% elif destination == 'tradeflow' %}
            <a href="{{ url_for('main.tradeflow_incoming_requests', company_id=company.company_id) }}" class="company-item" style="display: flex; justify-content: space-between; align-items: center; text-decoration: none; color: inherit;">
            {% else %}
            <a href="{{ url_for('main.workspace_overview', company_id=company.company_id) }}" class="company-item" style="display: flex; justify-content: space-between; align-items: center; text-decoration: none; color: inherit;">
            {% endif %}
                <div class="company-info">
                    <h2 class="company-title" style="margin: 0 0 4px 0;">{{ company.name }}</h2>
                    <p class="company-desc" style="margin: 0 0 6px 0; color: #4b5563;">
                        {{ company.description or 'Company ' ~ loop.index }}
                    </p>
                    <p class="company-stats" style="margin: 0; color: #6b7280; font-size: 14px;">
                        {{ company.member_count }} members â€¢ {{ company.service_count }} services
                    </p>
                </div>
                {% if destination == 'tradeflow' %}
                <span class="company-badge" style="background: #e0f2fe; color: #0369a1; padding: 8px 12px; border-radius: 12px; font-size: 13px; font-weight: 600;">Open Tradeflow</span>
                {% elif destination == 'marketplace' %}
                <span class="company-badge" style="background: #eef2ff; color: #4f46e5; padding: 8px 12px; border-radius: 12px; font-size: 13px; font-weight: 600;">Browse as</span>
                {% else %}
                <span class="company-badge" style="background: #eef2ff; color: #4f46e5; padding: 8px 12px; border-radius: 12px; font-size: 13px; font-weight: 600;">Select</span>
                {% endif %}
            </a>
            {% endfor %}
        </div>
        {% else %}
            <div class="empty-state">
                <p class="empty-state__text">You are not a member of any company yet.</p>
                <p><a href="{{ url_for('main.company_choice') }}">Create or join a company</a> to continue.</p>
            </div>
        {% endif %}
    </main>
{% endblock %}
