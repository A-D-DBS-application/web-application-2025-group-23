<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Select company | Barter.com</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="my-companies-page" style="background-color: #f6f8fb;">
    <main class="my-companies-main-content" style="max-width: 1100px; margin: 0 auto; padding: 32px 24px 48px;">
        <header class="my-companies-header" style="padding: 0 0 16px 0; border-bottom: 1px solid #e5e7eb; margin-bottom: 24px;">
            <div class="my-companies-header-inner" style="display: flex; justify-content: space-between; align-items: center;">
                <h1 class="page-heading" style="margin: 0; font-size: 24px; font-weight: 700; color: #111827;">Select a company</h1>
                <nav class="my-companies-nav">
                    <a href="{{ url_for('main.select_company_for_marketplace') }}" class="nav-link nav-link--active">Marketplace</a>
                    <a href="{{ url_for('main.my_companies') }}" class="nav-link">My companies</a>
                    <a href="{{ url_for('main.logout') }}" class="nav-link">Log out</a>
                </nav>
            </div>
        </header>

        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category,msg in messages %}
              <div class="alert alert-{{ category }}">{{ msg }}</div>
            {% endfor %}
          {% endif %}
        {% endwith %}

        {% if companies %}
        <div class="companies-list">
            {% for company in companies %}
            <a href="{{ url_for('main.marketplace', company_id=company.company_id) }}" class="company-item" style="display: flex; justify-content: space-between; align-items: center; text-decoration: none; color: inherit;">
                <div class="company-info">
                    <h2 class="company-title" style="margin: 0 0 4px 0;">{{ company.name }}</h2>
                    <p class="company-desc" style="margin: 0 0 6px 0; color: #4b5563;">
                        {{ company.description or 'Company ' ~ loop.index }}
                    </p>
                    <p class="company-stats" style="margin: 0; color: #6b7280; font-size: 14px;">
                        {{ company.member_count }} members â€¢ {{ company.service_count }} services
                    </p>
                </div>
                <span class="company-badge" style="background: #eef2ff; color: #4f46e5; padding: 8px 12px; border-radius: 12px; font-size: 13px; font-weight: 600;">Browse as</span>
            </a>
            {% endfor %}
        </div>
        {% else %}
            <div class="empty-state">
                <p class="empty-state__text">You are not a member of any company yet.</p>
                <p><a href="{{ url_for('main.company_choice') }}">Create or join a company</a> to access the marketplace.</p>
            </div>
        {% endif %}
    </main>
    <script src="{{ url_for('static', filename='device-detection.js') }}"></script>
</body>
</html>
