{% extends "base.html" %}
{% block title %}Offer Detail – Barter.com{% endblock %}

{% block content %}
<header class="header">
    <div class="logo">Barter.com</div>
    <nav class="nav-links">
      <a href="{{ url_for('main.select_company_for_marketplace') }}" class="nav-link">Marketplace</a>
      <a href="{{ url_for('main.my_companies') }}" class="nav-link">My companies</a>
      <a href="{{ url_for('main.logout') }}" class="nav-link">Log out</a>
    </nav>
  </header>
  <div class="container">
    <aside class="sidebar">
      <div class="company-badge">{{ company.name }}</div>
      
      <div class="sidebar-section">
        <div class="sidebar-section-title">Requests</div>
        <a href="{{ url_for('main.tradeflow_incoming_requests', company_id=company.company_id) }}" class="sidebar-link">Incoming</a>
        <a href="{{ url_for('main.tradeflow_you_requested', company_id=company.company_id) }}" class="sidebar-link">You Requested</a>
        <a href="{{ url_for('main.tradeflow_archived_requests', company_id=company.company_id) }}" class="sidebar-link">Archived</a>
      </div>

      <div class="sidebar-section">
        <div class="sidebar-section-title">Contracts</div>
        <a href="{{ url_for('main.tradeflow_match_made', company_id=company.company_id) }}" class="sidebar-link">Matches</a>
        <a href="{{ url_for('main.tradeflow_awaiting_signature', company_id=company.company_id) }}" class="sidebar-link active">Waiting for You</a>
        <a href="{{ url_for('main.tradeflow_awaiting_other_party', company_id=company.company_id) }}" class="sidebar-link">Awaiting Them</a>
      </div>

      <div class="sidebar-section">
        <div class="sidebar-section-title">Deals</div>
        <a href="{{ url_for('main.tradeflow_ongoing_deals', company_id=company.company_id) }}" class="sidebar-link">Ongoing</a>
        <a href="{{ url_for('main.tradeflow_completed_deals', company_id=company.company_id) }}" class="sidebar-link">Completed</a>
      </div>
    </aside>

    <main class="main">
      <a href="{{ url_for('main.tradeflow_awaiting_signature', company_id=company.company_id) }}" class="back-link">← Back to Waiting for You</a>
      <div class="detail-card">
        <h1 style="font-size: 28px; margin-bottom: 8px;">Offer Details</h1>
        <p style="color: #5f6368; margin-bottom: 28px;">Review this offer and decide to accept or decline</p>
        
        <div class="pair-grid">
          <div class="pair-side">
            <div class="pair-label">{{ proposal.from_company.name }} offers</div>
            <div class="pair-service">{{ proposal.from_service.title }}</div>
            <div class="pair-desc">{{ proposal.from_service.description }}</div>
          </div>
          <div class="pair-side">
            <div class="pair-label">{{ proposal.to_company.name }} offers</div>
            <div class="pair-service">{{ proposal.to_service.title }}</div>
            <div class="pair-desc">{{ proposal.to_service.description }}</div>
          </div>
        </div>
        
        <div style="border-top: 1px solid #e8eaed; padding-top: 24px;">
          <div class="section-title">Offer Terms</div>
          <div class="info-grid">
            <div class="info-item">
              <div class="info-label">Extra Payment</div>
              <div class="info-value">€{{ proposal.barter_coins_offered }}</div>
            </div>
            <div class="info-item">
              <div class="info-label">Created</div>
              <div class="info-value">{{ proposal.created_at.strftime('%d-%m-%Y') }}</div>
            </div>
          </div>
          
          {% if proposal.message %}
          <div class="message-box">
            <div class="message-label">Message from {{ proposal.from_company.name }}</div>
            <div class="message-text">{{ proposal.message }}</div>
          </div>
          {% endif %}
          
          <form method="POST">
            <div class="action-buttons">
              <button type="submit" name="action" value="accept" class="btn btn-accept">Accept Offer</button>
              <button type="submit" name="action" value="decline" class="btn btn-decline">Decline</button>
            </div>
          </form>
        </div>
      </div>
    </main>
  </div>
{% endblock %}
