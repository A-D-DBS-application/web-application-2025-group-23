{% extends "base.html" %}
{% block title %}My Services – Barter{% endblock %}

{% block content %}
</a>
        <nav>
            <a href="{{ url_for('main.marketplace') }}">Marketplace</a>
            <a href="{{ url_for('main.support') }}">Support</a>
            <a href="{{ url_for('main.about_us') }}">About Us</a>
            <a href="{{ url_for('main.index') }}" class="btn-profile-link">My Profile</a>
        </nav>
    </div>
    
    <div class="services-container">
        <a href="{{ url_for('main.view_company', company_id=company.company_id) }}" class="back-link">← My Services</a>
        
        <h1 class="page-title">{{ company.name }} - Services</h1>
        
        {% if services %}
            {% for service in services %}
            <div class="service-card">
                <div class="service-content">
                    <div class="service-title">{{ service.title }}</div>
                    <div class="service-description">{{ service.description }}</div>
                    <div class="service-meta">Duration: {{ service.duration_hours }} hours | Categories: {{ service.categories.replace(',', ', ') if service.categories else 'None' }}</div>
                </div>
                {% if is_admin %}
                <div class="service-actions">
                    <a href="{{ url_for('main.edit_service', service_id=service.service_id) }}" class="btn-edit">Edit</a>
                    <button class="btn-delete" onclick="confirmDelete('{{ service.service_id }}', '{{ service.title }}')">Delete</button>
                </div>
                {% endif %}
            </div>
            {% endfor %}
        {% else %}
            <div class="empty-state">
                <p>No services added yet.</p>
            </div>
        {% endif %}
        
        {% if is_admin %}
        <a href="{{ url_for('main.add_service', company_id=company.company_id) }}" class="add-btn">Add new service</a>
        {% endif %}
    </div>

    <script>
        function confirmDelete(serviceId, serviceTitle) {
            if (confirm(`Are you sure you want to delete "${serviceTitle}"? This action cannot be undone.`)) {
                window.location.href = `{{ url_for('main.delete_service', service_id='SERVICE_ID') }}`.replace('SERVICE_ID', serviceId);
            }
        }
    </script>
    <script src="{{ url_for('static', filename='device-detection.js') }}"></script>
{% endblock %}
